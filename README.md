# 全アバター衣装自動調整ツール

Unity向けのエディタ拡張ツールで、異なるボーン構造を持つアバターと衣装の間で自動的に最適化を行い、様々なアバターに対して衣装を簡単に適用できるようにします。

![Version](https://img.shields.io/badge/version-1.1.0-blue.svg)
![Unity](https://img.shields.io/badge/unity-2019.4%2B-green.svg)

## 概要

「全アバター衣装自動調整ツール」は、VRChatなどで使用される異なるボーン構造を持つアバターと衣装の互換性問題を解決するエディタツールです。命名規則、階層構造、空間位置などの情報を用いて自動的にボーンマッピングを行い、衣装をアバターに適用します。

## 主な機能

### ボーン識別・マッピング
- 名前ベース、階層ベース、位置ベースの複合的なマッピング
- 様々な命名規則に対応
- 手動でのマッピング調整機能

### 衣装調整
- ボーンベースの調整（スキンメッシュの調整）
- メッシュベースの調整（メッシュ形状の変形）
- 部位ごとの詳細な微調整

### Blender連携機能
- 裏でBlenderを活用した高精度な衣装適用
- 複雑なボーン構造にも対応する高度な調整
- 自動検出と設定による簡単セットアップ

### 使いやすいUI
- タブ分けされた直感的なインターフェース
- リアルタイム調整とプレビュー
- 調整プリセットの保存と読み込み

## インストール方法

1. Unityプロジェクトを開く
2. このリポジトリをダウンロード
3. ダウンロードしたフォルダをUnityプロジェクトの `Assets` フォルダにコピー

## 使用方法

1. Unity エディタのメニューから「Tools > Avatar Costume Auto Adjust Tool」を選択
2. ツールウィンドウが開いたら、以下の手順で操作:
   - アバターと衣装のオブジェクトをそれぞれ選択
   - 「ボーンマッピング」タブで自動マッピングを実行
   - 必要に応じてマッピングを手動調整
   - 「衣装を着せる」ボタンをクリックして衣装をアバターに適用
   - 「調整」タブで衣装のフィット感を微調整
   - 設定をプリセットとして保存

## Blender連携機能の使用方法

Blender連携機能を使用すると、特に複雑なボーン構造を持つアバターと衣装の間での適用精度が向上します。

### 設定方法

1. 設定タブの「Blender連携設定」を開く
2. 「Blender連携を使用」をオンにする
3. Blenderがコンピュータにインストールされている場合、自動的に検出されます
4. 自動検出に失敗した場合は、手動でBlenderの実行ファイルのパスを設定できます
5. 「Blender連携をテスト」ボタンでセットアップの検証ができます

### 動作の仕組み

1. 衣装を適用する際、裏でBlenderが自動的に起動されます
2. アバターと衣装のデータがBlenderに送信され、Pythonスクリプトによって処理されます
3. 処理結果が自動的にUnityに戻され、衣装として適用されます
4. ユーザーは通常通り調整タブで微調整を行うことができます

### 必要条件

- Blender 2.93以降がインストールされていること
- Unity 2019.4以降
- FBXインポート・エクスポート機能（標準でUnityに含まれています）

## 動作環境

- Unity 2019.4 以降
- Windows, macOS
- メモリ: 4GB以上推奨
- Blender連携機能を使用する場合: Blender 2.93以降

## 制限事項と注意点

- 現在の実装は基本的なフレームワークを提供しており、一部の高度な機能は未実装です
- 詳細なメッシュ変形アルゴリズムなど、一部の機能は簡易実装になっています
- Blender連携機能はBlenderがインストールされていない場合、自動的にUnity内部の処理にフォールバックします
- 詳細については [DESIGN.md](DESIGN.md) を参照してください

## バグ修正と更新履歴

### 2025年3月11日 - v1.1.0
- Blender連携機能の追加
- ボーン識別処理の改善
- 変数名の重複エラーを修正
- その他バグ修正と安定性の向上

### 2025年3月初版 - v1.0.0
- 初回リリース

## ライセンス

このプロジェクトはMITライセンスで公開されています。詳細については [LICENSE](LICENSE) ファイルを参照してください。

## 開発者向け情報

- プロジェクト構造や設計の詳細については [DESIGN.md](DESIGN.md) を参照
- 拡張方法や貢献方法は [CONTRIBUTING.md](CONTRIBUTING.md) を参照

## 謝辞

このツールは、VRChatコミュニティの様々なアバターとモデル制作者からインスピレーションを得て開発されました。
